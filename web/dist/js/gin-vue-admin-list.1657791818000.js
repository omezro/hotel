/*! 
 Build based on gin-vue-admin 
 Time : 1657791818000 */
var e=Object.defineProperty,l=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,o=(l,a,t)=>a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[a]=t,u=(e,l,a)=>new Promise(((t,o)=>{var u=e=>{try{d(a.next(e))}catch(l){o(l)}},r=e=>{try{d(a.throw(e))}catch(l){o(l)}},d=e=>e.done?t(e.value):Promise.resolve(e.value).then(u,r);d((a=a.apply(e,l)).next())}));import{r,b as d,o as n,c as s,d as i,e as p,w as m,F as c,z as v,h as g,i as f,q as b,Q as h}from"../gva/gin-vue-admin-index.1657791818000.js";import{g as y,f as V,d as _,a as w,c as k,u as C}from"./gin-vue-admin-sysHotels.16577918180002.js";import{t as x}from"./gin-vue-admin-stringFun.1657791818000.js";const z={class:"gva-search-box"},U=g("查询"),q=g("重置"),j={class:"gva-table-box"},D={class:"gva-btn-list"},I=g("新增"),O=i("p",null,"确定要删除吗？",-1),T={style:{"text-align":"right","margin-top":"8px"}},A=g("取消"),S=g("确定"),P=g("删除"),H=g("编辑"),F=g("删除"),E={class:"gva-pagination"},K=g("无早"),L=g("单早"),Q=g("双早"),$=g("套餐"),B=g("删除"),G={class:"dialog-footer"},J=g("取 消"),M=g("新增房型"),N=g("确 定"),R={name:"HotelList"},W=Object.assign(R,{setup(e){const g=r([]),R=r({name:"",platform:"",manager:"",settlementType:"",transferAccount:"",signatory:"",phone:"",mark:"",rooms:[{name:"",food:"1"}]}),W=r({name:[{required:!0,message:"请输入酒店名称",trigger:"blur"}],platform:[{required:!0,message:"请选择登陆平台",trigger:"change"}],manager:[{required:!0,message:"请输入经理姓名",trigger:"blur"}],settlementType:[{required:!0,message:"请输入结算方式",trigger:"blur"}],transferAccount:[{required:!0,message:"请输入转款账户",trigger:"blur"}],signatory:[{required:!0,message:"请输入签约人",trigger:"blur"}],phone:[{required:!0,message:"请输入催单电话",trigger:"blur"},{pattern:/^1[3456789]\d{9}$/,message:"手机号码有误",trigger:"blur"}],mark:[{required:!0,message:"请输入备注",trigger:"blur"}],room:[{required:!0,message:"请输入房型",trigger:"blur"}]}),X=r([{label:"携程",value:1},{label:"飞猪",value:2},{label:"美团",value:3}]),Y=(e,l)=>e.platform>3?"未知":["未知","携程","飞猪","美团"][e.platform],Z=r(1),ee=r(0),le=r(10),ae=r([]),te=r({}),oe=()=>{te.value={},ne()},ue=()=>{Z.value=1,le.value=10,ne()},re=e=>{le.value=e,ne()},de=e=>{Z.value=e,ne()},ne=()=>u(this,null,(function*(){const e=yield y(((e,u)=>{for(var r in u||(u={}))a.call(u,r)&&o(e,r,u[r]);if(l)for(var r of l(u))t.call(u,r)&&o(e,r,u[r]);return e})({page:Z.value,pageSize:le.value},te.value));0===e.code&&(ae.value=e.data.list,ee.value=e.data.total,Z.value=e.data.page,le.value=e.data.pageSize)}));ne();const se=r(!1),ie=r(""),pe=e=>u(this,null,(function*(){const l=yield V({ID:e.ID});ie.value="update",0===l.code&&(R.value=l.data.resysHotels,se.value=!0)})),me=()=>{se.value=!1,R.value={name:"",platform:"",manager:"",settlementType:"",transferAccount:"",signatory:"",phone:"",mark:"",rooms:[]}},ce=e=>u(this,null,(function*(){e.visible=!1;0===(yield _({ID:e.ID})).code&&(f({type:"success",message:"删除成功"}),1===ae.value.length&&Z.value>1&&Z.value--,ne())})),ve=({prop:e,order:l})=>{e&&("ID"===e&&(e="id"),te.value.orderKey=x(e),te.value.desc="descending"===l),ne()},ge=e=>{g.value=e},fe=r(!1),be=()=>u(this,null,(function*(){const e=g.value.map((e=>e.ID)),l=yield w({ids:e});0===l.code&&(f({type:"success",message:l.msg}),ae.value.length===e.length&&Z.value>1&&Z.value--,fe.value=!1,ne())})),he=()=>u(this,null,(function*(){let e;switch(ie.value){case"create":default:e=yield k(R.value);break;case"update":e=yield C(R.value)}0===e.code&&(me(),ne())})),ye=()=>{R.value.rooms.push({value:"",food:"1",key:Date.now()})},Ve=()=>{ie.value="create",se.value=!0};return(e,l)=>{const a=d("el-input"),t=d("el-form-item"),o=d("el-option"),u=d("el-select"),r=d("el-button"),y=d("el-form"),V=d("el-popover"),_=d("el-table-column"),w=d("el-table"),k=d("el-pagination"),C=d("el-radio-button"),x=d("el-radio-group"),ne=d("el-dialog");return n(),s("div",null,[i("div",z,[p(y,{ref:"searchForm",inline:!0,model:te.value},{default:m((()=>[p(t,{label:"酒店名称"},{default:m((()=>[p(a,{modelValue:te.value.name,"onUpdate:modelValue":l[0]||(l[0]=e=>te.value.name=e),placeholder:"酒店名称"},null,8,["modelValue"])])),_:1}),p(t,{label:"经理电话"},{default:m((()=>[p(a,{modelValue:te.value.phone,"onUpdate:modelValue":l[1]||(l[1]=e=>te.value.phone=e),placeholder:"经理电话"},null,8,["modelValue"])])),_:1}),p(t,{label:"平台类型"},{default:m((()=>[p(u,{modelValue:te.value.platform,"onUpdate:modelValue":l[2]||(l[2]=e=>te.value.platform=e),clearable:"",placeholder:"请选择"},{default:m((()=>[(n(!0),s(c,null,v(X.value,(e=>(n(),b(o,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),p(t,null,{default:m((()=>[p(r,{size:"small",type:"primary",icon:"search",onClick:ue},{default:m((()=>[U])),_:1}),p(r,{size:"small",icon:"refresh",onClick:oe},{default:m((()=>[q])),_:1})])),_:1})])),_:1},8,["model"])]),i("div",j,[i("div",D,[p(r,{size:"small",type:"primary",icon:"plus",onClick:Ve},{default:m((()=>[I])),_:1}),p(V,{visible:fe.value,"onUpdate:visible":l[5]||(l[5]=e=>fe.value=e),placement:"top",width:"160"},{reference:m((()=>[p(r,{icon:"delete",size:"small",disabled:!g.value.length,style:{"margin-left":"10px"},onClick:l[4]||(l[4]=e=>fe.value=!0)},{default:m((()=>[P])),_:1},8,["disabled"])])),default:m((()=>[O,i("div",T,[p(r,{size:"small",type:"text",onClick:l[3]||(l[3]=e=>fe.value=!1)},{default:m((()=>[A])),_:1}),p(r,{size:"small",type:"primary",onClick:be},{default:m((()=>[S])),_:1})])])),_:1},8,["visible"])]),p(w,{ref:"multipleTable",data:ae.value,style:{width:"100%"},"tooltip-effect":"dark","row-key":"ID",onSortChange:ve,onSelectionChange:ge},{default:m((()=>[p(_,{type:"selection",width:"55"}),p(_,{align:"left",label:"id","min-width":"60",prop:"ID"}),p(_,{label:"酒店名称",prop:"name",width:"180"}),p(_,{label:"签约人",prop:"signatory",width:"120"}),p(_,{label:"上架平台",prop:"platform",formatter:Y,width:"120"}),p(_,{label:"酒店经理姓名",prop:"manager",width:"120"}),p(_,{label:"电话",prop:"phone",width:"120"}),p(_,{label:"按钮组","min-width":"160"},{default:m((e=>[p(r,{icon:"edit",size:"small",type:"text",onClick:l=>pe(e.row)},{default:m((()=>[H])),_:2},1032,["onClick"]),p(r,{icon:"delete",size:"small",type:"text",onClick:l=>ce(e.row)},{default:m((()=>[F])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),i("div",E,[p(k,{"current-page":Z.value,"page-size":le.value,"page-sizes":[10,30,50,100],total:ee.value,layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:de,onSizeChange:re},null,8,["current-page","page-size","total"])])]),p(ne,{modelValue:se.value,"onUpdate:modelValue":l[14]||(l[14]=e=>se.value=e),"before-close":me,title:"新增酒店"},{footer:m((()=>[i("div",G,[p(r,{onClick:me},{default:m((()=>[J])),_:1}),p(r,{type:"primary",plain:"",onClick:ye},{default:m((()=>[M])),_:1}),p(r,{type:"primary",onClick:he},{default:m((()=>[N])),_:1})])])),default:m((()=>[p(y,{ref:"addHotel",model:R.value,rules:W.value,size:"medium","label-width":"100px","label-position":"left"},{default:m((()=>[p(t,{label:"酒店名称",prop:"name"},{default:m((()=>[p(a,{modelValue:R.value.name,"onUpdate:modelValue":l[6]||(l[6]=e=>R.value.name=e),placeholder:"请输入酒店名",maxlength:20,"show-word-limit":"",clearable:"",style:{width:"85%"}},null,8,["modelValue"])])),_:1}),p(t,{label:"登陆平台",prop:"platform"},{default:m((()=>[p(u,{modelValue:R.value.platform,"onUpdate:modelValue":l[7]||(l[7]=e=>R.value.platform=e),placeholder:"请选择登陆平台",clearable:""},{default:m((()=>[(n(!0),s(c,null,v(X.value,((e,l)=>(n(),b(o,{key:l,label:e.label,value:e.value,disabled:e.disabled},null,8,["label","value","disabled"])))),128))])),_:1},8,["modelValue"])])),_:1}),p(t,{label:"经理姓名",prop:"manager"},{default:m((()=>[p(a,{modelValue:R.value.manager,"onUpdate:modelValue":l[8]||(l[8]=e=>R.value.manager=e),placeholder:"请输入经理姓名",clearable:"",style:{width:"85%"}},null,8,["modelValue"])])),_:1}),p(t,{label:"结算方式",prop:"settlementType"},{default:m((()=>[p(a,{modelValue:R.value.settlementType,"onUpdate:modelValue":l[9]||(l[9]=e=>R.value.settlementType=e),placeholder:"请输入结算方式",clearable:"",style:{width:"85%"}},null,8,["modelValue"])])),_:1}),p(t,{label:"转款账户",prop:"transferAccount"},{default:m((()=>[p(a,{modelValue:R.value.transferAccount,"onUpdate:modelValue":l[10]||(l[10]=e=>R.value.transferAccount=e),placeholder:"请输入转款账户",clearable:"",style:{width:"85%"}},null,8,["modelValue"])])),_:1}),p(t,{label:"签约人",prop:"signatory"},{default:m((()=>[p(a,{modelValue:R.value.signatory,"onUpdate:modelValue":l[11]||(l[11]=e=>R.value.signatory=e),placeholder:"请输入签约人",clearable:"",style:{width:"85%"}},null,8,["modelValue"])])),_:1}),p(t,{label:"催单电话",prop:"phone"},{default:m((()=>[p(a,{modelValue:R.value.phone,"onUpdate:modelValue":l[12]||(l[12]=e=>R.value.phone=e),placeholder:"请输入催单电话",clearable:"",style:{width:"85%"}},null,8,["modelValue"])])),_:1}),p(t,{label:"备注",prop:"mark"},{default:m((()=>[p(a,{modelValue:R.value.mark,"onUpdate:modelValue":l[13]||(l[13]=e=>R.value.mark=e),placeholder:"请输入备注",clearable:"",style:{width:"85%"}},null,8,["modelValue"])])),_:1}),(n(!0),s(c,null,v(R.value.rooms,((e,l)=>(n(),b(t,{key:e.key,label:"房型"+(l+1),prop:"rooms."+l+".name",rules:{required:!0,message:"请输入房型",trigger:"blur"},placeholder:"请输入房型"},{default:m((()=>[p(a,{modelValue:e.name,"onUpdate:modelValue":l=>e.name=l,style:{width:"30%"}},null,8,["modelValue","onUpdate:modelValue"]),p(x,{modelValue:e.food,"onUpdate:modelValue":l=>e.food=l,style:{width:"37%","margin-left":"20px"}},{default:m((()=>[p(C,{label:1},{default:m((()=>[K])),_:1}),p(C,{label:2},{default:m((()=>[L])),_:1}),p(C,{label:3},{default:m((()=>[Q])),_:1}),p(C,{label:4},{default:m((()=>[$])),_:1})])),_:2},1032,["modelValue","onUpdate:modelValue"]),p(r,{style:{width:"15%"},type:"danger",plain:"",onClick:h((l=>(e=>{const l=R.value.rooms.indexOf(e);0===l?f({type:"error",message:"最少需要输入一个房型"}):R.value.rooms.splice(l,1)})(e)),["prevent"])},{default:m((()=>[B])),_:2},1032,["onClick"])])),_:2},1032,["label","prop"])))),128))])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])}}});export{W as default};
